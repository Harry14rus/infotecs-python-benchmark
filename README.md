ТЕСТОВОЕ ЗАДАНИЕ - Автотестирование (Python)

Программа для тестирования доступности серверов по HTTP протоколу. Замеряет время выполнения запроса и выводит итоговую статистику по скорости ответа сервера.

ТРЕБОВАНИЯ К ПРОГРАММЕ:

1. Принимает в качестве аргумента командной строки ключ –H/--hosts со значением хоста, на который будут выполняться запросы. Можно указать несколько адресов через запятую без пробелов;
2. Возможность указать ключ –C/--count со значением количества запросов, которые будут отправлены на каждый хост для выведения среднего значения (по умолчанию 1);
3. Выводит итоговую статистику по выполненным запросам для каждого хоста отдельно.

Формат вывода:
• Host – имя тестируемого хоста;
• Success – количество успешных запросов;
• Failed – количество запросов, на которые сервер ответил ошибкой (400 или 500);
• Errors – количество запросов, во время которых сервер был недоступен;
• Min – минимальное время выполнения запроса;
• Max – максимальное время выполнения запроса;
• Avg – среднее время выполнения запроса.

УСТАНОВКА:

1. Клонировать репозиторий:
   git clone https://github.com/Harry14rus/infotecs-python-benchmark.git
   cd infotecs-python-benchmark

2. Установить зависимости:
   pip install -r requirements.txt

ИСПОЛЬЗОВАНИЕ:

Доступны две версии программы:
- bench_async.py (асинхронная, рекомендуется для скорости)
- bench.py (синхронная)

Пример запуска программы для тестирования ya.ru и google.com с пятью запросами:
python bench_async.py -H https://ya.ru,https://google.com -C 5

ПАРАМЕТРЫ КОМАНДНОЙ СТРОКИ:

-H, --hosts    Список хостов через запятую (без пробелов)
-F, --file     Путь до файла со списком адресов разбитый на строки
-C, --count    Количество запросов на каждый хост (по умолчанию 1)
-O, --output   Путь до файла куда нужно сохранить вывод

ПРИМЕРЫ:

1. Тестирование хостов из командной строки:
   python bench_async.py -H https://ya.ru,https://google.com -C 3

2. Чтение хостов из файла:
   python bench_async.py -F hosts.txt -C 5

3. Сохранение результатов в файл:
   python bench_async.py -H https://example.com -C 10 -O results.txt

4. Использование синхронной версии:
   python bench.py -H https://ya.ru -C 2

ПРИМЕР ВЫВОДА:

============================================================
Host: https://ya.ru
------------------------------------------------------------
Success:              5
Failed:               0
Errors:               0
Min:                  0.045 сек
Max:                  0.089 сек
Avg:                  0.067 сек
============================================================

ДОПОЛНИТЕЛЬНЫЕ ВОЗМОЖНОСТИ:

1. Проверка входных параметров на соответствие типу и формату
2. Поддержка чтения списка хостов из файла
3. Сохранение результатов в файл
4. Асинхронная реализация для параллельного выполнения запросов

ЗАВИСИМОСТИ:

- Python 3.7+
- aiohttp>=3.8.0
- aiofiles>=23.0.0
